<div class="acordeon-horizontal d-flex">
  <div *ngFor="let mes of elementos; let i = index" class="item-acordeon" [class.expandido]="mes.expandido">
    <div class="encabezado-acordeon">
      <span class="nombre-mes">
        {{ mes.nombre.substring(0,1).toUpperCase() + mes.nombre.substring(1).toLowerCase() }}
        <span class="contador-tarjetas">
          ({{ mes.tarjetas.length }})
        </span>
      </span>
      <button class="boton-toggle" (click)="alternarItem(mes, $event)">
        <i [ngClass]="mes.expandido ? 'bi bi-chevron-left' : 'bi bi-chevron-right'"></i>
      </button>
    </div>




    <div *ngIf="mes.expandido"
      cdkDropList
      #todoList="cdkDropList"
      [cdkDropListData]="mes.tarjetas"
      [cdkDropListConnectedTo]="connectedDropLists"
      class="contenido-acordeon"
      (cdkDropListDropped)="drop($event, mes)"
      [id]="'todoList' + i">
      <div class="contenedor-tarjetas">
        <div *ngFor="let tarjeta of mes.tarjetas" cdkDrag [cdkDragData]="tarjeta" class="tarjeta">
          <div class="row  ">
            <!-- Encabezado con título e ícono de edición -->
          <div class="card-header">
            <i class="bi bi-card-text commandSeguimiento" title="Seguimiento"></i>
            <i class="bi bi-pencil-fill commandEditar" title="Editar"></i>
          </div>
            <div  class="col-9 tarjeta-row"  id =" Div  + {{idOportunidadTarjeta}} ">
              <div class="row justify-content-between">
                <div class="col-8 col-8-tarjeta">
                  <label id="cliente"  class="nombre-empresa" [ngClass]="getClaseNombreEmpresa(tarjeta.nombreEmpresa, tarjeta.nombreAbrev)">
                  {{ tarjeta.nombreEmpresa }}
                  </label>
                </div>
                <div class="col-3 abrev">
                  <label id='Abrev' class="nombre-abrev" title="{{ tarjeta.descripcion }}">{{ tarjeta.nombreAbrev }}</label>
                </div>
              </div>
              <label id="NombreOportunidad" class="nombre-oportunidad">{{ tarjeta.nombreOportunidad }}</label><br />
              <div class="fila-monto">
                <label class="monto">{{ tarjeta.monto | currency:'MXN':'symbol':'1.0-0' }}</label>
                <label class="probabilidad">{{ tarjeta.probabilidad }}</label>
                <label class="monto-normalizado">{{ tarjeta.montoNormalizado | currency:'MXN':'symbol':'1.0-0' }}</label>
              </div>
             </div>
            <div class="col-3" style='padding-top:10px' >

              <div class="fotoTarjeta" [ngStyle]="{'background-image': 'url(assets/Fotografia/' + (tarjeta.imagen) + ')', 'margin': 'auto'}"   [title]="tarjeta.nombreEjecutivo"> </div>

              <p class="iniciales" title="{{ tarjeta.nombreEjecutivo }}">
                {{ tarjeta.iniciales  }}
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>




<!-- Modal Bootstrap -->
<div class="modal fade show d-block ModalRegistrarFecha" *ngIf="mostrarModal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">

      <!-- Header de la Modal con el título y botón "X" para cerrar -->
      <div class="modal-header">
        <h5 class="modal-title">Fecha Estimada de Cierre</h5>
        <button type="button" class="btn-close" (click)="cancelar()" aria-label="Cerrar"></button>
      </div>

      <!-- Contenido de la Modal -->
      <div class="modal-body">
        <!-- Input oculto como en tu código original -->
        <input type="hidden" [(ngModel)]="idOportunidadTarjeta">

        <!-- Selector de Fecha usando ng-bootstrap -->
        <div class="mb-3">
             <!-- Campo de fecha con ngModel -->
    <input type="date" [(ngModel)]="fechaSeleccionada" />
        </div>
      </div>

      <!-- Footer con los botones -->
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" (click)="guardarFecha()" [disabled]="!fechaSeleccionada">Guardar</button>
        <button type="button" class="btn btn-secondary" (click)="cancelar()">Cancelar</button>
      </div>

    </div>
  </div>
</div>
