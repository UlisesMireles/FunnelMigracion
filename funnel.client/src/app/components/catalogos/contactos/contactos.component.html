<div class="container-fluid">
    <div class="row">
      <div class="col-12" style="text-align: left; font-weight: bold;">
        <h3>Administración General de Contactos</h3>
      </div>
  
      <div class="col-12">
        <div class="row contenedorTabla">
          <div *ngIf="loading">Cargando...</div>
          <p-table *ngIf="!loading" #dt [stripedRows]="true" [value]="contactos" [paginator]="true"
            [rows]="10" [rowsPerPageOptions]="[10, 20, 50]" (onPage)="pageChange($event)" [first]="first"
            [showCurrentPageReport]="true" paginatorPosition="both" [columnResizeMode]="'fit'"
            [resizableColumns]="true" [scrollable]="true"
            currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} Registros">
            
            <ng-template class="divAccionesTabla" #caption>
              <div class="row">
                <div class="col inDivDatatableHeader" style="text-align:right; margin-right:5px">
                  <p-button label="" icon="bi bi-arrow-clockwise" (click)="reset()" severity="secondary"
                    [ngStyle]="{'margin-right': '5px'}" />
                  <p-button label="" icon="bi bi-plus" severity="secondary" (click)="inserta()" />
                </div> 
              </div>
            </ng-template>
  
            <ng-template #header>
              <tr class="custom-header">
                <th></th>
                <th pSortableColumn="nombreCompleto">Nombre Completo</th>
                <th pSortableColumn="telefono">Teléfono</th>
                <th pSortableColumn="correoElectronico">Correo Electrónico</th>
                <th pSortableColumn="prospecto">Prospecto</th>
                <th pSortableColumn="desEstatus">Estatus</th>
              </tr>
              <tr class="custom-header2">
                <th></th>
                <th>
                  <input pInputText type="text" [(ngModel)]="filtroNombre"
                    (ngModelChange)="updateFilter($event, 'nombreCompleto')">
                </th>
                <th>
                  <input pInputText type="text" [(ngModel)]="filtroTelefono"
                    (ngModelChange)="updateFilter($event, 'telefono')">
                </th>
                <th>
                  <input pInputText type="text" [(ngModel)]="filtroCorreo"
                    (ngModelChange)="updateFilter($event, 'correoElectronico')">
                </th>
                <th>
                  <input pInputText type="text" [(ngModel)]="filtroProspecto"
                    (ngModelChange)="updateFilter($event, 'prospecto')">
                </th>
                <th>
                  <p-select [options]="EstatusDropdown" [(ngModel)]="selectedEstatus" [appendTo]="'body'"
                    (onChange)="FiltrarPorEstatus()" optionLabel="label" optionValue="value">
                  </p-select>
                </th>
              </tr>
            </ng-template>
  
            <ng-template pTemplate="emptymessage">
              <tr>
                <td colspan="6" class="text-center">No se encontraron registros</td>
              </tr>
            </ng-template>
  
            <ng-template #body let-contacto>
              <tr class="custom-header3 custom-row filas">
                <td>
                  <p-button type="button" icon="bi bi-pencil" (click)="actualiza(contacto)" text />
                </td>
                <td style="font-weight: bold;">{{ contacto.nombreCompleto }}</td>
                <td>{{ contacto.telefono }}</td>
                <td class="fixed-width-column">{{ contacto.correoElectronico }}</td>
                <td>{{ contacto.prospecto }}</td>
                <td>{{ contacto.desEstatus }}</td>
              </tr>
            </ng-template>
  
            <ng-template #footer>
              <tr class="custom-footer ">
                <td></td>
                <td colspan="7">Total: {{ getVisibleTotal('nombreSector',dt) }}</td>
              </tr>
            </ng-template>
          </p-table>
        </div>
        <p-toast position="center"></p-toast>
      </div>
    </div>
  </div>
  