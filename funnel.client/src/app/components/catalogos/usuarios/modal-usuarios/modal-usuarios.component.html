<p-dialog
  [(visible)]="visible"
  [modal]="true"
  [closable]="true"
  [style]="{ width: '40rem', height: 'auto' }"
  (onHide)="close()"
  (onShow)="onDialogShow()"
  class="bodyDialog"
>
<ng-template pTemplate="header">
  <label class="margen">
    {{ insertar ? 'Nuevo Usuario' : title + ' ' + usuarioForm.get('nombre')?.value }}
  </label>
</ng-template>

<ng-template pTemplate="content">
  <form *ngIf="usuarioForm" [formGroup]="usuarioForm">

      <div class="row inptSpace">
        <div class="col-sm-4 lbl">
          <label for="nombre">Nombre:</label>
        </div>
        <div class="col-sm-8 inptSpace">
          <input pInputText class="inptSize" formControlName="nombre" />
          <span *ngIf="usuarioForm.get('nombre')?.invalid && usuarioForm.get('nombre')?.touched" class="text-danger">
            <br />
            <ng-container *ngIf="usuarioForm.get('nombre')?.errors?.['required']">El nombre es obligatorio.</ng-container>
          </span>
        </div>
      </div>
  
      <div class="row inptSpace">
        <div class="col-sm-4 lbl">
          <label for="apellidoPaterno">Apellido Paterno:</label>
        </div>
        <div class="col-sm-8 inptSpace">
          <input pInputText class="inptSize" formControlName="apellidoPaterno" />
          <span *ngIf="usuarioForm.get('apellidoPaterno')?.invalid && usuarioForm.get('apellidoPaterno')?.touched" class="text-danger">
            <br />
            <ng-container *ngIf="usuarioForm.get('apellidoPaterno')?.errors?.['required']">El apellido paterno es obligatorio.</ng-container>
          </span>
        </div>
      </div>
  
      <div class="row inptSpace">
        <div class="col-sm-4 lbl">
          <label for="apellidoMaterno">Apellido Materno:</label>
        </div>
        <div class="col-sm-8 inptSpace">
          <input pInputText class="inptSize" formControlName="apellidoMaterno" />
          <span *ngIf="usuarioForm.get('apellidoMaterno')?.invalid && usuarioForm.get('apellidoMaterno')?.touched" class="text-danger">
            <br />
            <ng-container *ngIf="usuarioForm.get('apellidoMaterno')?.errors?.['required']">El apellido materno es obligatorio.</ng-container>
          </span>
        </div>
      </div>
  
      <div class="row inptSpace">
        <div class="col-sm-4 lbl">
          <label for="usuario">Usuario:</label>
        </div>
        <div class="col-sm-8 inptSpace">
          <input pInputText class="inptSize" formControlName="usuario" />
          <span *ngIf="usuarioForm.get('usuario')?.invalid && usuarioForm.get('usuario')?.touched" class="text-danger">
            <br />
            <ng-container *ngIf="usuarioForm.get('usuario')?.errors?.['required']">El usuario es obligatorio.</ng-container>
          </span>
        </div>
      </div>
  
      <div class="row inptSpace">
        <div class="col-sm-4 lbl">
          <label for="password">Contraseña:</label>
        </div>
        <div class="col-sm-8 inptSpace">
          <input type="password" pInputText class="inptSize" formControlName="password" />
          <span *ngIf="usuarioForm.get('password')?.invalid && usuarioForm.get('password')?.touched" class="text-danger">
            <br />
            <ng-container *ngIf="usuarioForm.get('password')?.errors?.['required']">La contraseña es obligatoria.</ng-container>
            <ng-container *ngIf="usuarioForm.get('password')?.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres.</ng-container>
          </span>
        </div>
      </div>
  
      <div class="row inptSpace">
        <div class="col-sm-4 lbl">
          <label for="iniciales">Iniciales:</label>
        </div>
        <div class="col-sm-8 inptSpace">
          <input pInputText class="inptSize" formControlName="iniciales" />
          <span *ngIf="usuarioForm.get('iniciales')?.invalid && usuarioForm.get('iniciales')?.touched" class="text-danger">
            <br />
            <ng-container *ngIf="usuarioForm.get('iniciales')?.errors?.['required']">Las iniciales son obligatorias.</ng-container>
          </span>
        </div>
      </div>
  
      <div class="row inptSpace">
        <div class="col-sm-4 lbl">
          <label for="correo">Correo Electrónico:</label>
        </div>
        <div class="col-sm-8 inptSpace">
          <input pInputText class="inptSize" formControlName="correo" />
          <span *ngIf="usuarioForm.get('correo')?.invalid && usuarioForm.get('correo')?.touched" class="text-danger">
            <br />
            <ng-container *ngIf="usuarioForm.get('correo')?.errors?.['required']">El correo es obligatorio.</ng-container>
            <ng-container *ngIf="usuarioForm.get('correo')?.errors?.['email']">Formato de correo inválido.</ng-container>
          </span>
        </div>
      </div>
  
      <div class="row inptSpace">
        <div class="col-sm-4 lbl">
          <label for="tiposUsuario">Tipo de Usuario: </label>
        </div>
        <div class="col-sm-8 inptSpace">
          <p-dropdown
            class="inptSize1"
            [options]="tiposUsuario"
            formControlName="idTipoUsuario"
            optionLabel="descripcion"
            optionValue="idTipoUsuario"
            appendTo="body"
            placeholder="Seleccione un tipo de usuario">
          </p-dropdown>
          <span *ngIf="usuarioForm.get('idTipoUsuario')?.invalid && usuarioForm.get('idTipoUsuario')?.touched" class="text-danger"><br>
            <ng-container *ngIf="usuarioForm.get('idTipoUsuario')?.errors?.['required']">Debe seleccionar un tipo de usuario.</ng-container>
          </span>
        </div>
      </div>
  
      <div class="row inptSpace">
        <div class="col-sm-4 lbl">
          <label for="estatus">Estatus:</label>
        </div>
        <div class="col-sm-8 inptSpace">
          <p-checkbox formControlName="estatus" binary="true"></p-checkbox>
        </div>
      </div>
    </form>
  </ng-template>
  

  <ng-template pTemplate="footer">
    <button *ngIf="!insertar" pButton label="Actualizar" (click)="guardarUsuario()" severity="secondary"></button>
    <button *ngIf="insertar" pButton label="Agregar" (click)="guardarUsuario()" severity="secondary"></button>
    <button pButton label="Cancelar" (click)="close()" severity="secondary"></button>
  </ng-template>
</p-dialog>
