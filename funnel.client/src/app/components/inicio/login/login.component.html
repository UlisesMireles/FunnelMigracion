<body>
  <main>
    <div class="navbar">
      <nav class="text-center m-auto">
        <img width="150" [src]="baseUrl + '/assets/img/logotipo-glupoint.png'" alt="logo SFS" class="m-auto">
      <a  *ngIf="showIniciarSesion" [href]="baseUrl + '/nuevo-registro'"class="iniciarSesion me-2" style="text-decoration: none;">Registrarse gratis</a>
      <button *ngIf="showIniciarSesion" class="iniciarSesion float-end" (click)="openLoginModal()">Iniciar Sesión</button>

      </nav>
    </div>
    <div class="container-fluid container-all imagenFondo" style="padding: 0px; overflow-x: hidden; height: 96vh;"  [style.background-image]="backgroundImg">
      <div class="d-flex" style="width: 100%; height: 100%;">
        <div class="container" style="margin-top: 60px !important;">
          <section class="funnel-descripcion">
            <div class="text-content">
              <h2 style="font-size: 2rem; line-height: 1; font-weight: 400; color: #1a73e8;">
                Aumenta tus ventas con un proceso eficiente.
              </h2>
              <p style="text-align: justify; font-size: 1.125rem; line-height: 1.6; color: #444; margin-bottom: 20px;">
                Rompe las barreras que te impiden conseguir más clientes y aumenta tus ventas. Nuestro sistema te proporciona las herramientas necesarias para que identifiques oportunidades clave y maximices el crecimiento de tus ingresos.
              </p>
              <p style="text-align: justify; font-size: 1.125rem; line-height: 1.6; color: #444; margin-bottom: 20px;">
                Sigue nuestra metodología propia, diseñada para guiarte paso a paso hacia tu éxito asegurado en el crecimiento de tus ventas.
              </p>
              <div class="cta-buttons">
              </div>
              <div>
                <div class="funnel-stage stage1" data-tooltip="Se realiza una llamada o visita inicial para analizar las necesidades del cliente.">Calificación de prospectos</div>
                <div class="funnel-stage stage2" data-tooltip="Se confirma la solución o producto que mejor se ajusta al cliente, identificando a la persona que toma las decisiones y posibles aliados.">Investigación de necesidades</div>
                <div class="funnel-stage stage3" data-tooltip="Se cuantifican los criterios de compra y se definen los objetivos de venta, con un conocimiento profundo del presupuesto y la competencia.">Elaboración de Propuestas</div>
                <div class="funnel-stage stage4" data-tooltip="Se entregan las propuestas, asegurando que las necesidades del cliente han sido entendidas y todas las objeciones han sido resueltas.">Presentación de propuestas</div>
                <div class="funnel-stage stage5" data-tooltip="La propuesta se encuentra entre las finalistas, y la negociación se lleva a cabo con la persona que toma la decisión.">Negociación</div>
              </div>
              <p class="mt-4" style="font-size: 0.875rem; text-align: center; line-height: 1.57; font-weight: 600; color: #333333bd; margin-top: 10px; margin-bottom: 7px; text-transform: uppercase;">
                Obtén tu sistema gratis.
              </p>
              <p style="font-size: 0.875rem; text-align: center; line-height: 1.57; font-weight: 600; color: #333333bd; margin-top: 10px; margin-bottom: 7px; text-transform: uppercase;">
                Impulsa tus ventas con un proceso sólido.
              </p>
            </div>
          </section>
        </div>
      </div>
      <p-toast position="center"></p-toast>
    </div>

    <div *ngIf="isLoginModalOpen" class="modal-overlay" (click)="closeLoginModal()"></div>

    <!-- Modal Login -->
    <div *ngIf="isLoginModalOpen" class="custom-modal-1" style="overflow-y: auto">
      <div class="modal-dialog custom-modal-dialog-1 modal-dialog-centered modal-lg">
        <div class="modal-content" style="max-height: 423px;">
          <div class="modal-header justify-content-center">
            <img width="100" [src]="baseUrl + '/assets/img/SFS login.png'" alt="logo SFS">

            <i class="bi bi-x-lg float-end close" (click)="closeLoginModal()"></i>

          </div>
          <div class="row modal-body custom-modal-body-1" style="padding: 25px 0; max-height: 470px; display: flex; ">

            <!-- Sección de inicio de sesión -->
            <div class="login-section col-lg-6 col-md-12 col-12 col-sm-12" style="padding-right: 25px !important;">
              <h5 class="text-center" style="font-size: 1.6rem; font-weight: 600; color: #1a73e8;">Acceso al Sistema</h5>
              <br />
              <form [formGroup]="loginForm" class="text-center border border-light formLogin">
                <div class="input-group mb-4">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="bi bi-person-fill"></i></span>
                  </div>
                  <input type="text" class="form-control" placeholder="usuario" formControlName="usuario" />
                </div>
                <div class="input-group mb-4 pass">
                  <div class="input-group-prepend">
                    <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
                  </div>
                  <input 
                    [type]="showPassword ? 'text' : 'password'" 
                    class="form-control" 
                    placeholder="contraseña" 
                    formControlName="password"
                  />
                  <span class="input-group-text toggle-password" (click)="togglePasswordVisibility()">
                    <i class="bi" [class.bi-eye-slash]="!showPassword" [class.bi-eye]="showPassword"></i>
                  </span>
                </div>
               <div class="input-group btn-l">
                  <button class="btn btn-login btn-lg btn-block form-control" (click)="login()">Iniciar Sesión</button>
                </div>
                <div class="text-center" *ngIf="errorMessage">
                  <p style="color: #a94442;">{{ errorMessage }}</p>
                </div>
                <div class="text-center" style="padding: 2%;">
                  <a (click)="openResetModal()" style="font-size: 17px; color: #2f8ce6; cursor: pointer;">¿Olvidaste tu contraseña?</a>
                </div>
              </form>
            </div>

            <!-- Línea divisoria -->
            <!--<div class="divisor"></div>-->
            <!-- Sección de información -->
            <div class="col-lg-6 col-md-12 col-12 col-sm-12" style="border-left: 1px solid #878080fa;padding-left: 25px !important;">
              <h2 class="mt-3" style="font-size: 2rem; font-weight: 700; color: #1a73e8;">Cada fase te acerca a mayores ingresos.</h2>
              <br />
              <p style="text-align: justify; font-size: 1rem; line-height: 1.6; color: #444;">¿No tienes una cuenta?</p>
              <div class="input-group btn-l">
                <button class="btn btn-reg btn-lg btn-block form-control" (click)="closeLoginModal()">Regístrate ahora</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <div *ngIf="isResetModalOpen" class="modal-overlay" (click)="closeLoginModal()"></div>

    <!-- Modal ResetPassword -->
    <div *ngIf="isResetModalOpen" class="custom-modal">
      <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content">
          <div class="modal-header justify-content-center">
            <img width="100" [src]="baseUrl + '/assets/img/SFS login.png'" alt="logo SFS">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeResetModal()"
              style="font-size: 2rem; position: absolute; right: -30px; top: -20px; color: #000; opacity: 1; padding: 0.5rem; background: transparent; border: none; cursor: pointer;">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <br />
            <h5 style="font-size: 1.6rem; text-align: center; line-height: 1.3; font-weight: 600; color: #1a73e8;">Recuperar Contraseña</h5>
            <div class="input-group mb-4" style="margin-top: 18px;">
              <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon1"><i class="bi bi-person-fill  "></i></span>
              </div>
              <input type="text" class="form-control" placeholder="usuario" [(ngModel)]="resetUsername" />
            </div>
            <div class="input-group mb-3" style="margin-bottom: 10px;">
              <button class="btn btn-login btn-lg btn-block form-control" (click)="resetPassword()">Enviar</button>
            </div>
            <div class="input-group mb-4" style="margin-bottom: 10px;">
              <button class="btn btn-light btn-lg btn-block form-control" (click)="openLoginModal()">Regresar</button>
            </div>
            <div style="text-align: center">
              <p *ngIf="resetErrorMessage" style="color: #a94442;">{{ resetErrorMessage }}</p>
            </div>
          </div>
        </div>
      </div>
<div style="position: absolute; top: 100%; left: 50%; transform: translateX(-50%); margin-top: 9%; width: 100%;">
    <p-toast key="reset-toast" position="bottom-center" [style]="{ height: '2vh' }"></p-toast>
  </div>
</div>    
    <div class="col-3 chatbot">
      
      <button class="btn-chat" (click)="toggleChat()">
        <i class="bi bi-chat-fill"></i> 
      </button>
      
      <ng-container *ngIf="(asistenteService.asistenteBienvenidaObservable | async) === 1">
        <div id="chat-container" class="chatbot-window" #chatContainer>
          <app-asistente-bienvenida></app-asistente-bienvenida>
        </div>
      </ng-container>
    </div>
  </main>
</body>

